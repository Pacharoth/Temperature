{% extends 'baseadmin.html' %}
{% block title %}
Subadmin
{% endblock title %}
{% block style %}
{% load static %}
<style>
    body {font-family: Arial, Helvetica, sans-serif;}
    
    /* The Modal (background) */
    .modalf-fake {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      padding-top: 100px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }
    
    
    /* Modal Content */
    .modalf-content {
      background-color: #fefefe;
      margin: auto;
      padding: 10px;
      border: 1px solid #888;
      width: 70%;
    }
    form{
        margin: 10px;
    }
    /* The Close Button */
    .close2 {
      color: #aaaaaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      display: block;
    }
    
    .close2:hover,
    .close2:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }

    .modalp-fake {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      padding-top: 100px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgb(0,0,0); /* Fallback color */
      background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }
    /* Modal Content */
    .modalp-content {
      background-color: #fefefe;
      margin: auto;
      padding: 10px;
      border: 1px solid #888;
      width: 50%;
    }

    /* The Close Button */
    .close21 {
      color: #aaaaaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      display: block;
    }
    
    .close21:hover,
    .close21:focus {
      color: #000;
      text-decoration: none;
      cursor: pointer;
    }
    
  </style>
{% endblock style %}
{% block content %}
          <!-- Begin Page Content -->
          <div class="container-fluid">

            <!-- Page Heading -->
            <div class="d-sm-flex align-items-center justify-content-between mb-4">
              <h1 class="h3 mb-0 text-gray-800">Dashboard</h1>
              <button href="#" class="generate-report btn btn-sm btn-primary shadow-sm " class="btn btn-primary dropdown-toggle " data-toggle="dropdown" >
                <i class="fas fa-download fa-sm text-white-50"></i> Generate Report
              </button>
                <div class="dropdown-menu">
                  <button class="btn dropdown-item js-weekly" style="border: none; width: 100%;" data-toggle="modal" data-url="{% url 'generateweekly' %}">
                       Weekly Report
                  </button>
                  <button class="btn dropdown-item js-monthly" style="border: none; width: 100%;" data-toggle="modal" data-url="{% url 'generatemonthly' %}">
                        Monthly Report
                  </button>
                  <button class="btn dropdown-item js-annually" style="border: none; width: 100%;" data-toggle="modal" data-url="{% url 'generateannually' %}">
                        Annual Report
                  </button>
                </div>
  
            </div>
  
  
  
            <!-- Content Row -->
            <div class="row">
  
              <!-- Earnings (Monthly) Card Example -->
              <div class="col-xl-4 col-md-6 mb-4">
                <div class="card border-left-primary shadow h-100 py-2">
                  <div class="card-body">
                    <div class="row no-gutters align-items-center">
                      <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Average (Monthly)</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800"><span id ="avg-monthly"></span></div>
                      </div>
                      <div class="col-auto">
                        <i class="fas fa-percent fa-2x text-gray-300"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
  
              <!-- Earnings (Monthly) Card Example -->
              <div class="col-xl-4 col-md-6 mb-4">
                <div class="card border-left-success shadow h-100 py-2">
                  <div class="card-body">
                    <div class="row no-gutters align-items-center">
                      <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Average (Annual)</div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800"><span id ="avg-year"></span></div>
                      </div>
                      <div class="col-auto">
                        <i class="fas fa-percent fa-2x text-gray-300"></i>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
                  <a id="myRoom" class="col-xl-4 col-md-6 mb-4" style="border:none; outline:none; background-color:#fefefe">
                    <div class="card border-left-warning shadow h-100 py-2">
                      <div class="card-body">
                        <div class="row no-gutters align-items-center">
                          <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1" style="text-align:left">Room</div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800"><span id="room-number"></span> <span id="room-username"></span></div>
                          </div>
                          <div class="col-auto">
                            <i class="fas fa-door-open fa-2x text-gray-300"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                  <div id="myMain" class="modalf-fake">
  
                  <!-- Modal content -->
                    <div class="modalf-content">
                      <div class="close2">&times;</div><br><br>
                      
                        <!-- <input class="form-control" type="text" placeholder="Search" aria-label="Search"> -->
                        <div class="row content-card">
                          <!-- Earnings (Monthly) Card Example -->
                          {% include "adminall/room/roomAdminlist.html" %}
                         
                        </div>
                      
                    </div>
                    
                  </div>
                </div>
            <!-- The Modal -->
  
              <div id="myMain1" class="modalp-fake">
  
                <!-- Modal content -->
                <div class="modalp-content">
                  <span class="close21">&times;</span>
                  <form action="">
                    
                      <p>Add Room</p>
                      <hr style="color:#888; height:1px" >
                      <!-- <label for="B&R">Building and Room: </label><Input name="B&R" placeholder="Building amd Room" style="width: 100%;"></Input>
                      <button class="btn btn-primary" class="form-control" type="submit" style="float: right;">Save</button> -->
                    
                    <div class="form-group">
                    
                      <input type="text" class="form-control" id="exampleInputRoom" placeholder="Building and Room">
                      <!-- <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small> -->
                    </div>
                  <button class="btn btn-primary" >Save</button>
                  </form>
                </div>
              
              </div>
              
            </div>
  
            <!-- Content Row -->
  
            <div class="row">
  
              <!-- Area Chart -->
              <div class="col-xl-12 col-lg-12">
                <div class="card shadow mb-4 ml-3">
                  <!-- Card Header - Dropdown -->
                  <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">Temperature: <span id="room-temperature"></span></h6>
                    <div class="dropdown no-arrow">
                      <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                      </a>
                      <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                        <div class="dropdown-header">Dropdown Header:</div>
                        <button id="{{username}}" class="dropdown-item js-delete-room" data-url="{% url 'deleteroomadmin' %}" ><i class="fas fa-trash"></i>Delete</button>
                        <button id="{{username}}" class="dropdown-item js-update-room" data-url="{% url 'updateroomadmin' %}"><i class="fa fa-edit" ></i>Edit Room</button>
                        <!-- <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a> -->
                      </div>
                    </div>
                  </div>
                  <!-- Card Body -->
                  <div class="card-body">
                      <canvas id="myChart"></canvas>
                  </div>
                </div>
              </div>
  
            </div>
{% endblock content %}
{% block script %}
<script>
  $(function(){
    $(".js-hide").click(function(){
      $(".modalf-fake").hide("slow");
    })
  })
</script>
  <script>
    var modal = []
    var btn=[]
    var span=[]
    // Get the modal
     modal[0] = document.getElementById("myMain");
    
    // Get the button that opens the modal
    btn[0] = document.getElementById("myRoom");
    
    // Get the <span> element that closes the modal
    span[0] = document.getElementsByClassName("close2")[0];

     modal[1] = document.getElementById("myMain1");
    
    // Get the button that opens the modal
     btn[1] = document.getElementById("myRoom1");
    
    // Get the <span> element that closes the modal
    span[1] = document.getElementsByClassName("close21")[0];
    
    // When the user clicks the button, open the modal 
    btn[0].onclick = ()=> {
      modal[0].style.display = "block";
    }
    
    // When the user clicks on <span> (x), close the modal
    span[0].onclick = ()=> {
      modal[0].style.display = "none";
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = (event)=> {
      if (event.target == modal[0]) {
        modal[0].style.display = "none";
      }
    }
    btn[1].onclick = ()=> {
      modal[1].style.display = "block";
    }
    
    // When the user clicks on <span> (x), close the modal
    span[1].onclick = ()=> {
      modal[1].style.display = "none";
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = (event)=> {
      if (event.target == modal[1]) {
        modal[1].style.display = "none";
      }
    }
  </script>
  <script src="{% static "adminpage/js/user/adminpage.js" %}"></script>

  <script src="{% static "adminpage/js/room/roomdata.js" %}"></script>
  <script src="{% static "adminpage/js/generatereport.js" %}"></script> 
  <script src="{% static "adminpage/js/chartfile.js" %}"></script>
{% endblock script %}